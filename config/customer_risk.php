<?php

return [
    /*
    |--------------------------------------------------------------------------
    | 要注意顧客 自動判定の閾値設定
    |--------------------------------------------------------------------------
    |
    | キャンセル/ノーショー/変更回数に基づく自動判定の閾値を設定します。
    | 期間内にこれらの閾値を超えると、is_blocked が自動的にONになります。
    |
    */

    'thresholds' => [
        // キャンセル: 直近90日で2回以上
        'cancellation' => [
            'count' => 2,
            'days' => 90,
        ],

        // ノーショー（来店なし）: 直近180日で1回以上
        'no_show' => [
            'count' => 1,
            'days' => 180,
        ],

        // 予約変更: 直近60日で3回以上
        'change' => [
            'count' => 3,
            'days' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | キャンセル理由の定義
    |--------------------------------------------------------------------------
    |
    | キャンセル/ノーショーの理由を標準化します。
    | 'exclude_from_count' が true の理由はカウントから除外されます。
    |
    */

    'cancel_reasons' => [
        'customer_request' => [
            'label' => '顧客都合',
            'exclude_from_count' => false,
        ],
        'store_fault' => [
            'label' => '店舗都合',
            'exclude_from_count' => true,  // カウント対象外
        ],
        'system_fix' => [
            'label' => 'システム修正',
            'exclude_from_count' => true,  // カウント対象外
        ],
        'emergency' => [
            'label' => '緊急事態',
            'exclude_from_count' => false,
        ],
        'illness' => [
            'label' => '体調不良',
            'exclude_from_count' => false,
        ],
        'weather' => [
            'label' => '天候不良',
            'exclude_from_count' => false,
        ],
        'other' => [
            'label' => 'その他',
            'exclude_from_count' => false,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | デフォルトのキャンセル理由
    |--------------------------------------------------------------------------
    |
    | API経由でcancel_reasonが指定されない場合のデフォルト値
    |
    */

    'default_cancel_reason' => 'customer_request',

    /*
    |--------------------------------------------------------------------------
    | リスクレベル判定
    |--------------------------------------------------------------------------
    |
    | カウント数に基づくリスクレベル（high/medium/low）の閾値
    |
    */

    'risk_levels' => [
        'high' => [
            'cancellation_count' => 3,
            'no_show_count' => 2,
        ],
        'medium' => [
            'cancellation_count' => 1,
            'no_show_count' => 1,
            'change_count' => 3,
        ],
    ],
];
