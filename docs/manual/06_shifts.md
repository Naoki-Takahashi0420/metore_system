# シフト管理完全ガイド

## シフト管理とは

スタッフの勤務予定を登録・管理する機能です。
シフトを登録することで、予約時に出勤しているスタッフのみが選択肢に表示されます。

---

## シフトの確認

### シフトカレンダーの表示
1. サイドバー「シフト管理」をクリック
2. 月間カレンダーでシフトが表示されます
3. 色分けでスタッフごとのシフトが確認できます

### ダッシュボードでの確認
1. ダッシュボードの「シフトカレンダー」ウィジェットを確認
2. 今週・今月のシフトが一目でわかります

### 日別シフト表示
1. シフトカレンダーで日付をクリック
2. その日のスタッフ別シフト詳細が表示されます
3. 出勤時間、休憩時間が確認できます

---

## シフトの登録

### 1日のシフトを登録
1. シフト管理画面で「新規作成」ボタン
2. 以下の項目を入力：
   - **スタッフ**: シフトを登録するスタッフを選択
   - **店舗**: 勤務店舗を選択
   - **日付**: シフトの日付
   - **勤務区分**: 通常勤務/休日/半休/有給など
   - **開始時刻**: 出勤時刻
   - **終了時刻**: 退勤時刻
   - **休憩時間**: 休憩の開始〜終了時刻
   - **メモ**: シフトに関する特記事項
3. 「作成」ボタンをクリック

### 繰り返しシフトの登録
1. シフト管理画面で「一括登録」ボタン
2. 以下の項目を入力：
   - **スタッフ**: 対象スタッフ
   - **期間**: 開始日〜終了日
   - **曜日**: 繰り返す曜日を選択（複数選択可）
   - **開始時刻・終了時刻**: 勤務時間
3. 「一括作成」ボタンをクリック

**💡 ポイント**:
- 月曜・水曜・金曜など特定の曜日のみ登録できます
- 祝日も自動的に含まれます（除外設定も可能）

### 1週間分のコピー
1. シフトカレンダーで基準となる週を表示
2. 「この週をコピー」ボタンをクリック
3. コピー先の週を選択
4. 自動的に同じシフトパターンが登録されます

---

## シフトの編集

### 個別編集
1. シフトカレンダーでシフトをクリック
2. 「編集」ボタンをクリック
3. 内容を修正して「保存」

### 時間のドラッグ変更
1. シフトカレンダーでシフトをドラッグ
2. 新しい時間にドロップ
3. 確認ダイアログで「OK」

### 複数日の一括編集
1. シフト一覧で編集したいシフトを複数選択
2. 「一括編集」ボタンをクリック
3. 変更内容を入力
4. 「保存」ボタンをクリック

---

## シフトの削除

### 個別削除
1. シフトをクリック
2. 「削除」ボタンをクリック
3. 確認ダイアログで「削除」

### 一括削除
1. シフト一覧で削除したいシフトを複数選択
2. 「一括削除」ボタンをクリック
3. 確認ダイアログで「削除」

**⚠️ 注意**: 予約が入っているシフトは削除できません

---

## 休暇・休日の登録

### 定休日の設定
1. サイドバー「設定」→「店舗設定」
2. 「定休日」セクションで曜日を選択
3. 「保存」ボタンをクリック

**💡 ポイント**: 定休日は自動的にシフトなしとして扱われます

### 臨時休業日の登録
1. シフト管理画面で該当日を選択
2. 全スタッフのシフトを削除
3. または「店舗休業日として登録」ボタンをクリック

### 有給・休暇の登録
1. シフト登録時に勤務区分で「有給」を選択
2. 開始時刻・終了時刻は空欄でOK
3. メモ欄に休暇理由を記載（任意）

---

## シフトと予約の連動

### 予約時のスタッフ選択
- シフトが登録されているスタッフのみ選択可能
- シフト外の時間帯には予約できません

### シフト変更時の予約への影響
- シフト削除時、該当時間帯に予約があると警告が表示されます
- 予約を先にキャンセル/変更してからシフトを削除してください

### 休憩時間の予約ブロック
- 休憩時間は自動的に予約不可になります
- タイムラインでグレー表示されます

---

## シフト集計・レポート

### 月間勤務時間の確認
1. シフト管理画面で「集計」タブ
2. スタッフ別の月間勤務時間が表示されます
3. CSVでエクスポート可能

### 人件費シミュレーション
1. シフト管理画面で「人件費」タブ
2. 各スタッフの時給を設定
3. 月間人件費が自動計算されます

### 出勤率の確認
1. シフト管理画面で「統計」タブ
2. スタッフ別の出勤率が表示されます
3. 欠勤・遅刻の回数も確認できます

---

## シフト提出機能（スタッフ側）

### スタッフがシフト希望を提出
1. スタッフがログイン
2. 「シフト希望提出」メニューをクリック
3. 出勤可能日・希望時間を入力
4. 「提出」ボタンをクリック

### 管理者がシフト希望を確認
1. シフト管理画面で「希望シフト」タブ
2. 各スタッフの希望が一覧表示されます
3. 希望を元にシフトを作成

### シフト確定と通知
1. シフトを全て登録
2. 「シフト確定」ボタンをクリック
3. 全スタッフにシフトが通知されます（LINE/メール）

---

## シフトパターンの活用

### パターンの登録
1. シフト管理画面で「パターン管理」タブ
2. 「新規パターン」ボタンをクリック
3. パターン名と内容を登録：
   - 曜日ごとの開始・終了時刻
   - 休憩時間
   - 対象スタッフ
4. 「保存」ボタンをクリック

### パターンの適用
1. シフト一括登録画面で「パターンから作成」を選択
2. 適用したいパターンを選択
3. 期間を指定
4. 「作成」ボタンをクリック

**💡 ポイント**: 通常の平日パターン、土日パターンなどを登録しておくと便利です

---

## シフト調整機能

### ヘルプ募集
1. シフトに欠員が出た場合
2. 「ヘルプ募集」ボタンをクリック
3. 全スタッフにヘルプ募集通知が送信されます
4. 代わりに入れるスタッフが「応募」ボタンをクリック

### シフト交換
1. スタッフAが「交換希望」を登録
2. スタッフBが「交換OK」を選択
3. 管理者が承認
4. 自動的にシフトが入れ替わります

---

## よくある質問

**Q: シフトを登録し忘れましたが、予約は入れられますか？**
A: シフトなしでも予約は作成できますが、スタッフ選択時に警告が表示されます。

**Q: 過去のシフトは編集できますか？**
A: はい、過去のシフトも編集可能です。勤怠記録の修正に使用してください。

**Q: シフトと実際の出勤が違う場合は？**
A: シフトは予定、勤怠記録は実績です。別途勤怠管理機能で実績を記録してください。

**Q: 複数店舗のシフトを一括管理できますか？**
A: はい、店舗を切り替えて確認できます。スタッフが複数店舗で働く場合も対応しています。

**Q: シフト確定後に変更できますか？**
A: はい、確定後も編集可能です。変更時はスタッフに再通知されます。

**Q: 祝日の扱いは？**
A: システムが自動的に祝日を判定します。営業する場合は通常通りシフトを登録してください。

**Q: 深夜勤務のシフトは？**
A: 終了時刻が開始時刻より早い場合、自動的に翌日とみなされます（例：22:00〜2:00）。
