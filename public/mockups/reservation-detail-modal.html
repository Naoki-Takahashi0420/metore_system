<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>予約詳細モーダル - モックアップ v3</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">

    <!-- メインモーダル: 予約詳細 -->
    <div id="main-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">

            <!-- ヘッダー -->
            <div class="sticky top-0 bg-white border-b border-gray-200 p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-1">予約詳細</h3>
                        <p class="text-sm text-gray-500">R202510075230</p>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
                </div>
            </div>

            <!-- コンテンツ -->
            <div class="p-6 space-y-6">

                <!-- 基本情報 -->
                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <p class="text-xs text-blue-700 mb-1">日時</p>
                            <p class="font-semibold text-gray-900">10/20（月）15:30-17:10</p>
                        </div>
                        <div>
                            <p class="text-xs text-blue-700 mb-1">座席</p>
                            <p class="font-semibold text-gray-900">席1</p>
                        </div>
                        <div>
                            <p class="text-xs text-blue-700 mb-1">顧客ステータス</p>
                            <span class="inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded">
                                既存顧客（5回目）
                            </span>
                        </div>
                    </div>
                </div>

                <!-- 顧客情報 -->
                <div>
                    <h4 class="text-sm font-bold text-gray-900 mb-3 pb-2 border-b border-gray-200">顧客情報</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-xs text-gray-500 mb-1">顧客名</p>
                            <p class="text-base font-semibold text-gray-900">山田 亜沙美</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-1">電話番号</p>
                            <p class="text-base text-gray-900">090-1234-5678</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-1">メールアドレス</p>
                            <p class="text-sm text-gray-900 truncate">yamada.asami@example.com</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-1">生年月日・年齢</p>
                            <p class="text-base text-gray-900">1990年5月15日（35歳）</p>
                        </div>
                    </div>
                </div>

                <!-- 契約状況 -->
                <div>
                    <h4 class="text-sm font-bold text-gray-900 mb-3 pb-2 border-b border-gray-200">契約状況</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <!-- サブスク -->
                        <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                            <div class="flex items-center justify-between mb-2">
                                <p class="text-sm font-semibold text-gray-900">サブスクリプション</p>
                                <span class="px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded">契約中</span>
                            </div>
                            <p class="text-base text-gray-700 mb-3">月4回コース</p>
                            <div class="space-y-1">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-500">利用状況</span>
                                    <span class="font-semibold text-gray-900">2/4回</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5">
                                    <div class="bg-blue-600 h-1.5 rounded-full" style="width: 50%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">次回更新: 2025年11月1日</p>
                            </div>
                        </div>

                        <!-- 回数券 -->
                        <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                            <div class="flex items-center justify-between mb-2">
                                <p class="text-sm font-semibold text-gray-900">回数券</p>
                                <span class="px-2 py-1 bg-green-600 text-white text-xs font-medium rounded">利用可能</span>
                            </div>
                            <p class="text-base text-gray-700 mb-3">10回券</p>
                            <div class="space-y-1">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-500">残り回数</span>
                                    <span class="font-semibold text-gray-900">3/10回</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5">
                                    <div class="bg-green-600 h-1.5 rounded-full" style="width: 30%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">有効期限: 2025年12月31日</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 予約内容 -->
                <div>
                    <h4 class="text-sm font-bold text-gray-900 mb-3 pb-2 border-b border-gray-200">予約内容</h4>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-gray-500 mb-1">予約タイプ</p>
                                <p class="text-sm text-gray-900">通常予約</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">担当スタッフ</p>
                                <p class="text-sm text-gray-900">高橋 直樹</p>
                            </div>
                        </div>

                        <div>
                            <p class="text-xs text-gray-500 mb-2">メニュー</p>
                            <div class="border border-gray-200 rounded-lg p-3 bg-gray-50">
                                <p class="text-base font-semibold text-gray-900 mb-1">【ご新規様限定】眼精疲労ケア80分コース</p>
                                <p class="text-sm text-gray-500">所要時間: 80分</p>
                            </div>
                        </div>

                        <div>
                            <p class="text-xs text-gray-500 mb-2">追加オプション</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-gray-100 border border-gray-200 rounded text-sm text-gray-700">
                                    アイマッサージ（+15分）
                                </span>
                                <span class="px-3 py-1 bg-gray-100 border border-gray-200 rounded text-sm text-gray-700">
                                    ホットアイマスク
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- カルテ・前回施術結果 -->
                <div>
                    <div class="flex items-center justify-between mb-3 pb-2 border-b border-gray-200">
                        <h4 class="text-sm font-bold text-gray-900">前回の施術結果</h4>
                        <button onclick="showMedicalHistoryModal()" class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                            カルテ履歴を見る →
                        </button>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                        <p class="text-xs text-gray-500 mb-4">4回目（10/8）</p>

                        <!-- 強度 -->
                        <div class="mb-4 pb-4 border-b border-gray-200">
                            <p class="text-xs text-gray-500 mb-2">施術強度</p>
                            <div class="flex items-center gap-3">
                                <span class="text-base text-gray-400">40%</span>
                                <span class="text-gray-400">→</span>
                                <span class="text-base font-semibold text-gray-900">50%</span>
                                <span class="text-sm text-green-600 font-medium">(+10%)</span>
                            </div>
                        </div>

                        <!-- 視力 -->
                        <div>
                            <p class="text-xs text-gray-500 mb-2">視力（裸眼）</p>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">右目</span>
                                    <div class="flex items-center gap-3">
                                        <span class="text-sm text-gray-400">0.5</span>
                                        <span class="text-gray-400">→</span>
                                        <span class="text-sm font-semibold text-gray-900">0.8</span>
                                        <span class="text-sm text-green-600 font-medium">(+0.3)</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">左目</span>
                                    <div class="flex items-center gap-3">
                                        <span class="text-sm text-gray-400">0.6</span>
                                        <span class="text-gray-400">→</span>
                                        <span class="text-sm font-semibold text-gray-900">0.9</span>
                                        <span class="text-sm text-green-600 font-medium">(+0.3)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 次回予約 -->
                <div>
                    <div class="flex items-center justify-between mb-3 pb-2 border-b border-gray-200">
                        <h4 class="text-sm font-bold text-gray-900">次回予約</h4>
                        <button onclick="showReservationHistoryModal()" class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                            予約履歴を見る →
                        </button>
                    </div>
                    <button onclick="showNextReservationModal()" class="w-full text-left border-2 border-blue-300 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-xl font-bold text-gray-900 mb-1">10月27日（月）15:30</p>
                                <p class="text-sm text-gray-600 mb-2">眼精疲労ケア60分コース</p>
                                <p class="text-sm text-gray-500">座席2 | 担当: 高橋 直樹</p>
                            </div>
                            <span class="px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded">
                                7日後
                            </span>
                        </div>
                    </button>
                </div>

                <!-- 座席移動 -->
                <div class="border-t border-gray-200 pt-4">
                    <h4 class="text-sm font-bold text-gray-900 mb-3 pb-2 border-b border-gray-200">座席変更</h4>
                    <p class="text-sm text-gray-600 mb-4">クリックで座席を変更できます（現在: 座席1）</p>

                    <div class="grid grid-cols-3 gap-3">
                        <!-- 座席1（現在選択中） -->
                        <button class="border-2 border-blue-600 bg-blue-50 rounded-lg p-4 text-center hover:bg-blue-100 transition-colors">
                            <div class="text-lg font-bold text-blue-600 mb-1">座席1</div>
                            <div class="text-xs text-blue-600 font-medium">現在</div>
                        </button>

                        <!-- 座席2（空き） -->
                        <button class="border-2 border-gray-300 bg-white rounded-lg p-4 text-center hover:border-blue-400 hover:bg-blue-50 transition-colors">
                            <div class="text-lg font-bold text-gray-700 mb-1">座席2</div>
                            <div class="text-xs text-green-600 font-medium">空き</div>
                        </button>

                        <!-- 座席3（空き） -->
                        <button class="border-2 border-gray-300 bg-white rounded-lg p-4 text-center hover:border-blue-400 hover:bg-blue-50 transition-colors">
                            <div class="text-lg font-bold text-gray-700 mb-1">座席3</div>
                            <div class="text-xs text-green-600 font-medium">空き</div>
                        </button>

                        <!-- 座席4（使用中） -->
                        <button disabled class="border-2 border-gray-300 bg-gray-100 rounded-lg p-4 text-center cursor-not-allowed opacity-60">
                            <div class="text-lg font-bold text-gray-500 mb-1">座席4</div>
                            <div class="text-xs text-red-600 font-medium">使用中</div>
                        </button>

                        <!-- 座席5（空き） -->
                        <button class="border-2 border-gray-300 bg-white rounded-lg p-4 text-center hover:border-blue-400 hover:bg-blue-50 transition-colors">
                            <div class="text-lg font-bold text-gray-700 mb-1">座席5</div>
                            <div class="text-xs text-green-600 font-medium">空き</div>
                        </button>

                        <!-- 座席6（空き） -->
                        <button class="border-2 border-gray-300 bg-white rounded-lg p-4 text-center hover:border-blue-400 hover:bg-blue-50 transition-colors">
                            <div class="text-lg font-bold text-gray-700 mb-1">座席6</div>
                            <div class="text-xs text-green-600 font-medium">空き</div>
                        </button>
                    </div>

                    <div class="mt-4 flex items-center justify-between text-sm">
                        <div class="flex gap-4">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded bg-green-600"></div>
                                <span class="text-gray-600">空き</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded bg-red-600"></div>
                                <span class="text-gray-600">使用中</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded bg-blue-600"></div>
                                <span class="text-gray-600">選択中</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- フッター -->
            <div class="sticky bottom-0 bg-white border-t border-gray-200 p-4 rounded-b-lg flex justify-end gap-3">
                <button class="px-4 py-2 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded font-medium transition-colors">
                    閉じる
                </button>
                <button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium transition-colors">
                    予約を編集
                </button>
            </div>

        </div>
    </div>

    <!-- カルテ履歴モーダル -->
    <div id="medical-history-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto">

            <!-- ヘッダー -->
            <div class="sticky top-0 bg-white border-b border-gray-200 p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-1">カルテ履歴</h3>
                        <p class="text-sm text-gray-500">山田 亜沙美 様</p>
                    </div>
                    <button onclick="hideMedicalHistoryModal()" class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
                </div>
            </div>

            <!-- コンテンツ -->
            <div class="p-6 space-y-6">

                <!-- 視力推移グラフ -->
                <div class="border border-gray-200 rounded-lg p-5 bg-gradient-to-br from-blue-50 to-white">
                    <h4 class="text-lg font-bold text-gray-900 mb-4">視力推移グラフ</h4>

                    <div class="space-y-8">
                        <!-- 右目 -->
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-blue-600"></div>
                                    <p class="text-sm font-semibold text-gray-700">右目（裸眼）</p>
                                </div>
                                <p class="text-xs text-gray-500">0.3 → 0.8</p>
                            </div>
                            <div class="relative bg-white rounded border border-gray-200 p-4">
                                <svg viewBox="0 0 500 200" class="w-full h-48">
                                    <!-- グリッドライン -->
                                    <line x1="40" y1="20" x2="40" y2="160" stroke="#d1d5db" stroke-width="2"/>
                                    <line x1="40" y1="160" x2="480" y2="160" stroke="#d1d5db" stroke-width="2"/>

                                    <!-- Y軸目盛り -->
                                    <text x="25" y="165" font-size="10" fill="#6b7280">0.0</text>
                                    <text x="25" y="130" font-size="10" fill="#6b7280">0.3</text>
                                    <text x="25" y="95" font-size="10" fill="#6b7280">0.6</text>
                                    <text x="25" y="60" font-size="10" fill="#6b7280">0.9</text>
                                    <text x="25" y="25" font-size="10" fill="#6b7280">1.2</text>

                                    <!-- 値ラベル背景（白） -->
                                    <rect x="72" y="106" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="162" y="100" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="252" y="94" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="342" y="83" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="432" y="48" width="16" height="14" fill="white" opacity="0.9"/>

                                    <!-- 折れ線 -->
                                    <polyline
                                        points="80,125 170,119 260,113 350,102 440,67"
                                        fill="none"
                                        stroke="#2563eb"
                                        stroke-width="3"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />

                                    <!-- データポイント円 -->
                                    <circle cx="80" cy="125" r="5" fill="#2563eb"/>
                                    <circle cx="170" cy="119" r="5" fill="#2563eb"/>
                                    <circle cx="260" cy="113" r="5" fill="#2563eb"/>
                                    <circle cx="350" cy="102" r="5" fill="#3b82f6"/>
                                    <circle cx="440" cy="67" r="6" fill="#1d4ed8"/>

                                    <!-- 値ラベル -->
                                    <text x="80" y="115" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.3</text>
                                    <text x="170" y="109" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.35</text>
                                    <text x="260" y="103" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.4</text>
                                    <text x="350" y="92" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.5</text>
                                    <text x="440" y="57" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.8</text>

                                    <!-- X軸ラベル -->
                                    <text x="80" y="180" font-size="10" fill="#6b7280" text-anchor="middle">1回目</text>
                                    <text x="170" y="180" font-size="10" fill="#6b7280" text-anchor="middle">2回目</text>
                                    <text x="260" y="180" font-size="10" fill="#6b7280" text-anchor="middle">3回目</text>
                                    <text x="350" y="180" font-size="10" fill="#6b7280" text-anchor="middle">4回目</text>
                                    <text x="440" y="180" font-size="10" fill="#6b7280" text-anchor="middle">5回目</text>
                                </svg>
                            </div>
                        </div>

                        <!-- 左目 -->
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-green-600"></div>
                                    <p class="text-sm font-semibold text-gray-700">左目（裸眼）</p>
                                </div>
                                <p class="text-xs text-gray-500">0.4 → 0.9</p>
                            </div>
                            <div class="relative bg-white rounded border border-gray-200 p-4">
                                <svg viewBox="0 0 500 200" class="w-full h-48">
                                    <!-- グリッドライン -->
                                    <line x1="40" y1="20" x2="40" y2="160" stroke="#d1d5db" stroke-width="2"/>
                                    <line x1="40" y1="160" x2="480" y2="160" stroke="#d1d5db" stroke-width="2"/>

                                    <!-- Y軸目盛り -->
                                    <text x="25" y="165" font-size="10" fill="#6b7280">0.0</text>
                                    <text x="25" y="130" font-size="10" fill="#6b7280">0.3</text>
                                    <text x="25" y="95" font-size="10" fill="#6b7280">0.6</text>
                                    <text x="25" y="60" font-size="10" fill="#6b7280">0.9</text>
                                    <text x="25" y="25" font-size="10" fill="#6b7280">1.2</text>

                                    <!-- 値ラベル背景（白） -->
                                    <rect x="72" y="94" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="162" y="88" width="18" height="14" fill="white" opacity="0.9"/>
                                    <rect x="252" y="83" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="342" y="71" width="16" height="14" fill="white" opacity="0.9"/>
                                    <rect x="432" y="36" width="16" height="14" fill="white" opacity="0.9"/>

                                    <!-- 折れ線 -->
                                    <polyline
                                        points="80,113 170,107.5 260,102 350,90 440,55"
                                        fill="none"
                                        stroke="#16a34a"
                                        stroke-width="3"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />

                                    <!-- データポイント円 -->
                                    <circle cx="80" cy="113" r="5" fill="#16a34a"/>
                                    <circle cx="170" cy="107.5" r="5" fill="#16a34a"/>
                                    <circle cx="260" cy="102" r="5" fill="#16a34a"/>
                                    <circle cx="350" cy="90" r="5" fill="#22c55e"/>
                                    <circle cx="440" cy="55" r="6" fill="#15803d"/>

                                    <!-- 値ラベル -->
                                    <text x="80" y="103" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.4</text>
                                    <text x="170" y="97" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.45</text>
                                    <text x="260" y="92" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.5</text>
                                    <text x="350" y="80" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.6</text>
                                    <text x="440" y="45" font-size="11" font-weight="bold" fill="#1e293b" text-anchor="middle">0.9</text>

                                    <!-- X軸ラベル -->
                                    <text x="80" y="180" font-size="10" fill="#6b7280" text-anchor="middle">1回目</text>
                                    <text x="170" y="180" font-size="10" fill="#6b7280" text-anchor="middle">2回目</text>
                                    <text x="260" y="180" font-size="10" fill="#6b7280" text-anchor="middle">3回目</text>
                                    <text x="350" y="180" font-size="10" fill="#6b7280" text-anchor="middle">4回目</text>
                                    <text x="440" y="180" font-size="10" fill="#6b7280" text-anchor="middle">5回目</text>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 p-3 bg-white rounded border border-blue-200">
                        <p class="text-sm text-gray-700">
                            <span class="font-semibold text-blue-600">右目:</span> 0.5向上 |
                            <span class="font-semibold text-green-600">左目:</span> 0.5向上
                        </p>
                    </div>
                </div>

                <div class="border-t border-gray-200 pt-4">
                    <h4 class="text-lg font-bold text-gray-900 mb-4">カルテ一覧</h4>
                </div>

                <!-- カルテ1 -->
                <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <p class="text-lg font-bold text-gray-900">5回目 - 2025年10月20日</p>
                            <p class="text-sm text-gray-500">目のトレーニング銀座本店 | 担当: 高橋 直樹</p>
                        </div>
                        <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded">最新</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mt-4">
                        <div>
                            <p class="text-xs text-gray-500 mb-1">施術強度</p>
                            <p class="text-sm text-gray-900">50% (+10%)</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-1">視力（裸眼）</p>
                            <p class="text-sm text-gray-900">右: 0.8 / 左: 0.9</p>
                        </div>
                    </div>
                    <button class="mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium">詳細を見る →</button>
                </div>

                <!-- カルテ2 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <p class="text-lg font-bold text-gray-900">4回目 - 2025年10月8日</p>
                            <p class="text-sm text-gray-500">目のトレーニング銀座本店 | 担当: 高橋 直樹</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mt-4">
                        <div>
                            <p class="text-xs text-gray-500 mb-1">施術強度</p>
                            <p class="text-sm text-gray-900">40% (+5%)</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-1">視力（裸眼）</p>
                            <p class="text-sm text-gray-900">右: 0.5 / 左: 0.6</p>
                        </div>
                    </div>
                    <button class="mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium">詳細を見る →</button>
                </div>

                <!-- カルテ3 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <p class="text-lg font-bold text-gray-900">3回目 - 2025年9月25日</p>
                            <p class="text-sm text-gray-500">目のトレーニング銀座本店 | 担当: 佐藤 美咲</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mt-4">
                        <div>
                            <p class="text-xs text-gray-500 mb-1">施術強度</p>
                            <p class="text-sm text-gray-900">35% (+5%)</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-1">視力（裸眼）</p>
                            <p class="text-sm text-gray-900">右: 0.4 / 左: 0.5</p>
                        </div>
                    </div>
                    <button class="mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium">詳細を見る →</button>
                </div>

            </div>

            <!-- フッター -->
            <div class="sticky bottom-0 bg-white border-t border-gray-200 p-4 rounded-b-lg flex justify-end">
                <button onclick="hideMedicalHistoryModal()" class="px-4 py-2 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded font-medium transition-colors">
                    閉じる
                </button>
            </div>

        </div>
    </div>

    <!-- 予約履歴モーダル -->
    <div id="reservation-history-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto">

            <!-- ヘッダー -->
            <div class="sticky top-0 bg-white border-b border-gray-200 p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-1">予約履歴</h3>
                        <p class="text-sm text-gray-500">山田 亜沙美 様</p>
                    </div>
                    <button onclick="hideReservationHistoryModal()" class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
                </div>
            </div>

            <!-- コンテンツ -->
            <div class="p-6 space-y-4">

                <!-- 未来の予約 -->
                <div>
                    <h4 class="text-sm font-bold text-gray-700 mb-3">今後の予約</h4>
                    <div class="border-2 border-blue-300 rounded-lg p-4 bg-blue-50">
                        <div class="flex items-start justify-between mb-2">
                            <div>
                                <p class="text-lg font-bold text-gray-900">10月27日（月）15:30</p>
                                <p class="text-sm text-gray-600">眼精疲労ケア60分コース</p>
                                <p class="text-xs text-gray-500 mt-1">座席2 | 担当: 高橋 直樹</p>
                            </div>
                            <span class="px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded">7日後</span>
                        </div>
                        <button class="mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium">詳細を見る →</button>
                    </div>
                </div>

                <!-- 過去の予約 -->
                <div>
                    <h4 class="text-sm font-bold text-gray-700 mb-3">過去の予約</h4>
                    <div class="space-y-3">

                        <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                            <div class="flex items-start justify-between mb-2">
                                <div>
                                    <p class="text-lg font-bold text-gray-900">10月20日（月）15:30</p>
                                    <p class="text-sm text-gray-600">【ご新規様限定】眼精疲労ケア80分コース</p>
                                    <p class="text-xs text-gray-500 mt-1">座席1 | 担当: 高橋 直樹</p>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded">完了</span>
                            </div>
                            <button class="mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium">詳細を見る →</button>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer">
                            <div class="flex items-start justify-between mb-2">
                                <div>
                                    <p class="text-lg font-bold text-gray-900">10月8日（月）14:00</p>
                                    <p class="text-sm text-gray-600">眼精疲労ケア60分コース</p>
                                    <p class="text-xs text-gray-500 mt-1">座席3 | 担当: 高橋 直樹</p>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded">完了</span>
                            </div>
                            <button class="mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium">詳細を見る →</button>
                        </div>

                    </div>
                </div>

            </div>

            <!-- フッター -->
            <div class="sticky bottom-0 bg-white border-t border-gray-200 p-4 rounded-b-lg flex justify-end">
                <button onclick="hideReservationHistoryModal()" class="px-4 py-2 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded font-medium transition-colors">
                    閉じる
                </button>
            </div>

        </div>
    </div>

    <!-- 次回予約詳細モーダル -->
    <div id="next-reservation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">

            <!-- ヘッダー -->
            <div class="sticky top-0 bg-white border-b border-gray-200 p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-1">次回予約詳細</h3>
                        <p class="text-sm text-gray-500">R202510275230</p>
                    </div>
                    <button onclick="hideNextReservationModal()" class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
                </div>
            </div>

            <!-- コンテンツ -->
            <div class="p-6 space-y-6">

                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <p class="text-xs text-blue-700 mb-1">日時</p>
                            <p class="font-semibold text-gray-900">10/27（月）15:30-16:30</p>
                        </div>
                        <div>
                            <p class="text-xs text-blue-700 mb-1">座席</p>
                            <p class="font-semibold text-gray-900">席2</p>
                        </div>
                        <div>
                            <p class="text-xs text-blue-700 mb-1">ステータス</p>
                            <span class="inline-block px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded">
                                予約済み
                            </span>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 class="text-sm font-bold text-gray-900 mb-3 pb-2 border-b border-gray-200">予約内容</h4>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-gray-500 mb-1">予約タイプ</p>
                                <p class="text-sm text-gray-900">通常予約</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">担当スタッフ</p>
                                <p class="text-sm text-gray-900">高橋 直樹</p>
                            </div>
                        </div>

                        <div>
                            <p class="text-xs text-gray-500 mb-2">メニュー</p>
                            <div class="border border-gray-200 rounded-lg p-3 bg-gray-50">
                                <p class="text-base font-semibold text-gray-900 mb-1">眼精疲労ケア60分コース</p>
                                <p class="text-sm text-gray-500">所要時間: 60分</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 座席移動 -->
                <div>
                    <h4 class="text-sm font-bold text-gray-900 mb-3 pb-2 border-b border-gray-200">座席移動</h4>
                    <div class="grid grid-cols-6 gap-2">
                        <button class="p-3 border border-gray-300 rounded hover:border-blue-600 hover:bg-blue-50 transition-all">
                            <div class="text-center">
                                <div class="font-semibold text-gray-900 text-sm">席1</div>
                                <div class="text-xs text-green-600 mt-1">空き</div>
                            </div>
                        </button>
                        <button class="p-3 border-2 border-blue-600 bg-blue-50 rounded">
                            <div class="text-center">
                                <div class="font-semibold text-gray-900 text-sm">席2</div>
                                <div class="text-xs text-blue-600 mt-1">現在</div>
                            </div>
                        </button>
                        <button disabled class="p-3 border border-gray-200 bg-gray-50 rounded opacity-50 cursor-not-allowed">
                            <div class="text-center">
                                <div class="font-semibold text-gray-400 text-sm">席3</div>
                                <div class="text-xs text-red-600 mt-1">予約済</div>
                            </div>
                        </button>
                        <button class="p-3 border border-gray-300 rounded hover:border-blue-600 hover:bg-blue-50 transition-all">
                            <div class="text-center">
                                <div class="font-semibold text-gray-900 text-sm">席4</div>
                                <div class="text-xs text-green-600 mt-1">空き</div>
                            </div>
                        </button>
                        <button class="p-3 border border-gray-300 rounded hover:border-blue-600 hover:bg-blue-50 transition-all">
                            <div class="text-center">
                                <div class="font-semibold text-gray-900 text-sm">席5</div>
                                <div class="text-xs text-green-600 mt-1">空き</div>
                            </div>
                        </button>
                        <button disabled class="p-3 border border-gray-200 bg-gray-50 rounded opacity-50 cursor-not-allowed">
                            <div class="text-center">
                                <div class="font-semibold text-gray-400 text-sm">席6</div>
                                <div class="text-xs text-red-600 mt-1">予約済</div>
                            </div>
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-3">※ 緑色の席をクリックすると座席を移動できます</p>
                </div>

            </div>

            <!-- フッター -->
            <div class="sticky bottom-0 bg-white border-t border-gray-200 p-4 rounded-b-lg flex justify-end gap-3">
                <button onclick="hideNextReservationModal()" class="px-4 py-2 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded font-medium transition-colors">
                    閉じる
                </button>
                <button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium transition-colors">
                    予約を編集
                </button>
            </div>

        </div>
    </div>

    <script>
        function showMedicalHistoryModal() {
            document.getElementById('medical-history-modal').classList.remove('hidden');
        }
        function hideMedicalHistoryModal() {
            document.getElementById('medical-history-modal').classList.add('hidden');
        }
        function showReservationHistoryModal() {
            document.getElementById('reservation-history-modal').classList.remove('hidden');
        }
        function hideReservationHistoryModal() {
            document.getElementById('reservation-history-modal').classList.add('hidden');
        }
        function showNextReservationModal() {
            document.getElementById('next-reservation-modal').classList.remove('hidden');
        }
        function hideNextReservationModal() {
            document.getElementById('next-reservation-modal').classList.add('hidden');
        }
    </script>

</body>
</html>
